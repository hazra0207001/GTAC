<script>
    document.addEventListener("DOMContentLoaded", function () {
  const searchOptionSelect = document.getElementById("search_option");
  const nameInput = document.getElementById("name_or_category");
  const purchaseDateStartInput = document.getElementById("purchase_date_start");
  const purchaseDateEndInput = document.getElementById("purchase_date_end");
  const activeradio = document.getElementById("status_true");
  const inactiveradio = document.getElementById("status_false");
    
  function toggleInputs(disableName, disableDate, disableType) {
    nameInput.disabled = disableName;
    purchaseDateStartInput.disabled = disableDate;
    purchaseDateEndInput.disabled = disableDate;
    activeradio.disabled = disableType;
    inactiveradio.disabled = disableType;
  }

  // Initial state
  toggleInputs(true, true, true);

  searchOptionSelect.addEventListener("change", function () {
    const selectedOption = searchOptionSelect.value;

    switch (selectedOption) {
      case "Search by name or category":
        toggleInputs(false, true, true);
        break;
      case "Search by purchase date range":
        toggleInputs(true, false, true);
        break;
      case "Search by Status":
        toggleInputs(true, true, false);
        break;
      default:
        toggleInputs(true, true, true);
    }
  });
});
</script>
<%= flash[:notice]%>
<div class ="card mt-5 mb-4">

  <div class= "card-body">
    <%= form_tag "/products", method: :get, id: 'search-form' do %>
        <table style="border: 1px solid black;">
            <tbody>
                <tr >
                    <td ><%= label_tag 'search', 'Select Search by:' %></td>
                    <td><%= select_tag :search_option, options_for_select(['Select an option','Search by name or category', 'Search by purchase date range', 'Search by Status']) %></td>
                </tr>
                <tr>
                    <td><%= label_tag 'name_category', 'Search by Name Or Category:' %></td>
                    <td><%= text_field_tag :name_or_category, nil, disabled: true %></td>
                </tr>
                <tr>
                    <td><%= label_tag 'date', 'Search by Date:' %></td>
                    <td><%= date_field_tag :purchase_date_start, nil, disabled: true %>
                        <%= date_field_tag :purchase_date_end, nil, disabled: true %></td>
                </tr>
                <tr>
                    <td><%= label_tag 'status', 'Search by Status:' %></td>
                   
                    <td id ="status"><%= radio_button_tag :status, true, checked: "checked",disabled: true  %>
                            <%= label_tag 'status_active', 'Active' %>
                            <%= radio_button_tag :status, false, disabled: true  %>
                        <%= label_tag :status_inactive, 'Inactive' %>
                    </td>
                </tr>
            </tbody>
        </table>
        <%= submit_tag 'Search' %>
    <% end %>
  </div>
</div>


<div class ="card mt-5 mb-4">

  <div class= "card-body">
    <h2 class = "text-center"> Listing Products </h2>
  </div>
</div>
<table>
    <thead>
        <tr>
        <th>NAME</th>
        <th>UNIT</th>
        <th>PRICE</th>
        <th>PURCHASE DATE</th>
        <th>STATUS</th>
        <th>Category</th>
        <th>Tags</th>
        <th> ACTIONS</th>
        </tr>
    </thead>
    <tbody>
        <%@products.each do|product|%>
            <tr>
                <td><%=product.name%></td>
                <td><%=product.unit%></td>
                <td><%=product.price%></td>
                <td><%=product.purchase_date%></td>
                <td><%=product.status ? "Active" : "Inactive"%></td>
                <td><%=product.category_name%>
                <td><%=product.tags%></td>
                
                    
                </td>
                <td><%= link_to "Edit", "/products/#{product.id}/edit" %></td>
                <td><%= link_to "show","/products/#{product.id}"%>
            </tr>
        <%end%>
    </tbody>
</table>